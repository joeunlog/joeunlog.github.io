<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>2021-04-23 - Joeunlog</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>2021-04-23 | Joeunlog</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="2021-04-23" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." /> <meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." /> <link rel="canonical" href="/docs/daily-learning-log/20210423.html" /> <meta property="og:url" content="/docs/daily-learning-log/20210423.html" /> <meta property="og:site_name" content="Joeunlog" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="2021-04-23" /> <script type="application/ld+json"> {"@type":"WebPage","url":"/docs/daily-learning-log/20210423.html","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"2021-04-23","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> Joeunlog </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/docs/" class="nav-list-link">Joeunvit Study log</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/project/" class="nav-list-link">PROJECT</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/project/awseks-semiproject.html" class="nav-list-link">AWS EKS semi project</a></li><li class="nav-list-item "><a href="/docs/project/final-project.html" class="nav-list-link">Final project</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/python-study/" class="nav-list-link">Python</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/python-study/01-set-environment.html" class="nav-list-link">Setting environment</a></li><li class="nav-list-item "><a href="/docs/python-study/02-data-type.html" class="nav-list-link">Data type</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/daily-learning-log/" class="nav-list-link">Daily-learning-log</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/daily-learning-log/20210127.html" class="nav-list-link">2021-01-27</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210128.html" class="nav-list-link">2021-01-28</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210129.html" class="nav-list-link">2021-01-29</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210201.html" class="nav-list-link">2021-02-01</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210205.html" class="nav-list-link">2021-02-05</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210329.html" class="nav-list-link">2021-03-29</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210330.html" class="nav-list-link">2021-03-30</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210331.html" class="nav-list-link">2021-03-31</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210401.html" class="nav-list-link">2021-04-01</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210405.html" class="nav-list-link">2021-04-05</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210406.html" class="nav-list-link">2021-04-06</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210407.html" class="nav-list-link">2021-04-07</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210408.html" class="nav-list-link">2021-04-08</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210409.html" class="nav-list-link">2021-04-09</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210420.html" class="nav-list-link">2021-04-20</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210421.html" class="nav-list-link">2021-04-21</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210422.html" class="nav-list-link">2021-04-22</a></li><li class="nav-list-item active"><a href="/docs/daily-learning-log/20210423.html" class="nav-list-link active">2021-04-23</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210426.html" class="nav-list-link">2021-04-26</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210427.html" class="nav-list-link">2021-04-27</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210428.html" class="nav-list-link">2021-04-28</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210429.html" class="nav-list-link">2021-04-29</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210503.html" class="nav-list-link">2021-05-03</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210504.html" class="nav-list-link">2021-05-04</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210506.html" class="nav-list-link">2021-05-06</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210507.html" class="nav-list-link">2021-05-07</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210510.html" class="nav-list-link">2021-05-10</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210511.html" class="nav-list-link">2021-05-11</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210512.html" class="nav-list-link">2021-05-12</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210513.html" class="nav-list-link">2021-05-13</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210514.html" class="nav-list-link">2021-05-14</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210517.html" class="nav-list-link">2021-05-17</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210518.html" class="nav-list-link">2021-05-18</a></li><li class="nav-list-item "><a href="/docs/daily-learning-log/20210521.html" class="nav-list-link">2021-05-21</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Joeunlog" aria-label="Search Joeunlog" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/docs/daily-learning-log/">Daily-learning-log</a></li> <li class="breadcrumb-nav-list-item"><span>2021-04-23</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1> Kubernetes </h1> <h2> Vagrantfile로 kubenetes환경 구성하기 </h2> <ul> <li>Kubelet, Kubeadm, Kubectl 버전 : 나중에 AWS의 EKS 사용할 건데, EKS의 쿠베 버전기본값인 1.18.18로 설치</li> </ul> <p>windowpowershell에서</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>kubernetes
<span class="nb">cd </span>kubernetes
vagrant init
vi Vagrantfile
</code></pre></div></div> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># -*- mode: ruby -*-</span>
<span class="c"># vi: set ft=ruby :</span>

Vagrant.configure<span class="o">(</span><span class="s2">"2"</span><span class="o">)</span> <span class="k">do</span> |config|
  config.vm.define <span class="s2">"kube-master1"</span> <span class="k">do</span> |ubuntu|
    ubuntu.vm.box <span class="o">=</span> <span class="s2">"ubuntu/focal64"</span>
    ubuntu.vm.hostname <span class="o">=</span> <span class="s2">"kube-master1"</span>
    ubuntu.vm.network <span class="s2">"private_network"</span>, ip: <span class="s2">"192.168.200.11"</span>
    ubuntu.vm.provider <span class="s2">"virtualbox"</span> <span class="k">do</span> |vb|
      vb.name   <span class="o">=</span> <span class="s2">"kube-master1"</span>
      vb.cpus   <span class="o">=</span> 2
      vb.memory <span class="o">=</span> 2048
    end
  end
  config.vm.define <span class="s2">"kube-node1"</span> <span class="k">do</span> |ubuntu|
    ubuntu.vm.box <span class="o">=</span> <span class="s2">"ubuntu/focal64"</span>
    ubuntu.vm.hostname <span class="o">=</span> <span class="s2">"kube-node1"</span>
    ubuntu.vm.network <span class="s2">"private_network"</span>, ip: <span class="s2">"192.168.200.21"</span>
    ubuntu.vm.provider <span class="s2">"virtualbox"</span> <span class="k">do</span> |vb|
      vb.name   <span class="o">=</span> <span class="s2">"kube-node1"</span>
      vb.cpus   <span class="o">=</span> 2
      vb.memory <span class="o">=</span> 2048
    end
  end
  config.vm.define <span class="s2">"kube-node2"</span> <span class="k">do</span> |ubuntu|
    ubuntu.vm.box <span class="o">=</span> <span class="s2">"ubuntu/focal64"</span>
    ubuntu.vm.hostname <span class="o">=</span> <span class="s2">"kube-node2"</span>
    ubuntu.vm.network <span class="s2">"private_network"</span>, ip: <span class="s2">"192.168.200.22"</span>
    ubuntu.vm.provider <span class="s2">"virtualbox"</span> <span class="k">do</span> |vb|
      vb.name   <span class="o">=</span> <span class="s2">"kube-node2"</span>
      vb.cpus   <span class="o">=</span> 2
      vb.memory <span class="o">=</span> 2048
    end
  end
  config.vm.define <span class="s2">"kube-node3"</span> <span class="k">do</span> |ubuntu|
    ubuntu.vm.box <span class="o">=</span> <span class="s2">"ubuntu/focal64"</span>
    ubuntu.vm.hostname <span class="o">=</span> <span class="s2">"kube-node3"</span>
    ubuntu.vm.network <span class="s2">"private_network"</span>, ip: <span class="s2">"192.168.200.23"</span>
    ubuntu.vm.provider <span class="s2">"virtualbox"</span> <span class="k">do</span> |vb|
      vb.name   <span class="o">=</span> <span class="s2">"kube-node3"</span>
      vb.cpus   <span class="o">=</span> 2
      vb.memory <span class="o">=</span> 2048
    end
  end

  config.vm.provision <span class="s2">"shell"</span>, inline: <span class="o">&lt;&lt;-</span><span class="no">SHELL</span><span class="sh">
    # Enable SSH with Password Auth
    sed -i 's/ChallengeResponseAuthentication no/ChallengeResponseAuthentication yes/g' /etc/ssh/sshd_config
    sudo systemctl restart ssh
    # Change Package Repository
    sed -i 's/archive.ubuntu.com/mirror.kakao.com/g' /etc/apt/sources.list
    sed -i 's/security.ubuntu.com/mirror.kakao.com/g' /etc/apt/sources.list
    # Install Docker-CE
    sudo apt update
    sudo apt install -y </span><span class="se">\</span><span class="sh">
      apt-transport-https </span><span class="se">\</span><span class="sh">
      ca-certificates </span><span class="se">\</span><span class="sh">
      curl gnupg lsb-release
    curl -fsSL https://download.docker.com/linux/ubuntu/gpg </span><span class="se">\</span><span class="sh">
      | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
    echo </span><span class="se">\</span><span class="sh">
      "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu </span><span class="se">\</span><span class="sh">
      </span><span class="si">$(</span>lsb_release <span class="nt">-cs</span><span class="si">)</span><span class="sh"> stable" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
    sudo apt update
    sudo apt install -y docker-ce docker-ce-cli containerd.io
    sudo usermod -aG docker vagrant
    # Install Kubelet, Kubeadm, Kubectl
    sudo curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg
    echo "deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main" </span><span class="se">\</span><span class="sh">
      | sudo tee /etc/apt/sources.list.d/kubernetes.list
    sudo apt update
    sudo apt install -y kubelet=1.18.18-00 kubeadm=1.18.18-00 kubectl=1.18.18-00
    sudo apt-mark hold kubelet kubeadm kubectl
</span><span class="no">    SHELL
</span>end
</code></pre></div></div> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vagrant up

<span class="c">#만약 kube-node3 구성 중에 에러가 났다면?</span>
vagrant destroy <span class="nt">-f</span> kube-node3
vagrant up kube-node3

vagrant ssh kube-master1
kubeadm version
ip a s
<span class="c">#node1 접속</span>
ssh vagrant@192.168.200.21
<span class="nb">yes
</span>password : vagrant
<span class="nb">exit</span>

<span class="c">#설치 계속</span>
<span class="nb">sudo </span>kubeadm init <span class="nt">--apiserver-advertise-address</span><span class="o">=</span>192.168.200.11 <span class="nt">--pod-network-cidr</span><span class="o">=</span>192.168.0.0/16
<span class="nb">mkdir</span> <span class="nt">-p</span> <span class="nv">$HOME</span>/.kube
<span class="nb">sudo cp</span> <span class="nt">-i</span> /etc/kubernetes/admin.conf  <span class="nv">$HOME</span>/.kube/config
<span class="nb">sudo chown</span> <span class="si">$(</span><span class="nb">id</span> <span class="nt">-u</span><span class="si">)</span>:<span class="si">$(</span><span class="nb">id</span> <span class="nt">-g</span><span class="si">)</span> <span class="nv">$HOME</span>/.kube/config

<span class="c">#컨테이너 네트워크 애드온 설치</span>
kubectl create <span class="nt">-f</span> https://docs.projectcalico.org/manifests/tigera-operator.yaml
kubectl create <span class="nt">-f</span> https://docs.projectcalico.org/manifests/custom-resources.yaml

<span class="c">#설치확인</span>
kubectl get nodes
kubectl get pods <span class="nt">-A</span>
watch <span class="nt">-n1</span> <span class="nt">-d</span> kubectl get pods <span class="nt">-A</span>
<span class="c"># ready 될 때까지 기다림</span>

<span class="c">#node에서 kubeadm join : node는 이것만 하면 됨!!!!!!</span>
ssh vagrant@192.168.200.21~23
<span class="nb">sudo </span>kubeadm <span class="nb">join </span>192.168.200.11:6443 <span class="nt">--token</span> 5unqe6.eml8ncxxu6fyxsno <span class="se">\</span>
    <span class="nt">--discovery-token-ca-cert-hash</span> sha256:0cc33936db2862ecf2a4826f6f5923537b7cb13e9b675f60cbebd9fd7c2d0fde

<span class="c">#kubeadm join할 token, hash 확인 (kubeadm init했을 때 join명령어 복사 안했을 때)</span>
kubeadm token list
kubectl cluster-info
openssl x509 <span class="nt">-pubkey</span> <span class="nt">-in</span> /etc/kubernetes/pki/ca.crt | openssl rsa <span class="nt">-pubin</span> <span class="nt">-outform</span> der 2&gt;/dev/null | <span class="se">\</span>
     openssl dgst <span class="nt">-sha256</span> <span class="nt">-hex</span> | <span class="nb">sed</span> <span class="s1">'s/^.* //'</span>


</code></pre></div></div> <p>컨테이너 생성해보기</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl run web1 <span class="nt">--image</span><span class="o">=</span>httpd
<span class="c">#컨테이너가 생성되는것, 이 컨테이너에 대한 yaml파일이 생성됨</span>
kubectl get pod web1 <span class="nt">-o</span> yaml
<span class="c">#yaml파일 확인</span>
kubectl get pods
<span class="c">#생성된 컨테이너 확인 (Pod 속성이 컨테이너임)</span>
</code></pre></div></div> <p>쿠버네티스 리소스는 YAML 파일 형태로 정의, 기본 구성은 아래와 같음</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span>
<span class="na">kind</span><span class="pi">:</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span>
<span class="na">spec</span><span class="pi">:</span>
<span class="na">status </span><span class="pi">:</span> <span class="c1">#이 부분은 read-only</span>
</code></pre></div></div> <p>kube에서 쓰는 api resources 목록 확인</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl api-resources
<span class="c">#여기서 보면, 위 yaml에 표기되어있던 kind:Pod는 api group이 없는 resource : 코어 그룹이기 때문</span>

kubectl api-versions
<span class="c">#group/version으로 표시됨</span>
<span class="c">#제일 밑에 v1으로만 나와있는거 (그룹이 없는거) : 코어 그룹의 버전임</span>
</code></pre></div></div> <p>원하는 resoure의 version 검색하기 (KIND로 검색)</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl api-resources | <span class="nb">grep </span>ReplicaSet
<span class="c">#3번째 항목인 그룹 확인 (ReplicaSet은 apps그룹)</span>
kubectl api-versions | <span class="nb">grep</span> ^apps

kubectl api-resources | <span class="nb">grep </span>Service
<span class="c">#그룹이 없는 경우는 코어그룹이므로</span>
kubectl api-versions | <span class="nb">tail</span> <span class="nt">-1</span>

kubectl api-resources | <span class="nb">grep </span>Ingress
<span class="c">#그룹이 extensions와 networking.k8s.io 두 개로 나오는데, 지금은 extension안씀</span>
kubectl api-versions | <span class="nb">grep</span> ^extensions
kubectl api-versions | <span class="nb">grep</span> ^networking.k8s.io
<span class="c">#버전이 v1, v1beta1 이렇게 두 개로 나오는데 더 최신은 v1</span>
</code></pre></div></div> <p>특정 KIND 정보 검색하기</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl explain pod
kubectl explain pod
<span class="c">#이름 미완성이어도 검색됨</span>
kubectl explain replicasets

kubectl explain pods.kind
<span class="c">#정보 중 특정 항목만 검색가능</span>
kubectl explain pods.metadata
kubectl explain pods.metadata.name
kubectl explain pods.spec
<span class="c">#참고로 pod는 spec에 containers가 꼭 정의되어야 함</span>
<span class="c">#containers   &lt;[]Object&gt; -required-</span>
<span class="c">#[]는 리스트를 의미, 즉 컨테이너가 여러 대 정의될 수 있음</span>
kubectl explain pods.spec.containers
kubectl explain pods.spec.containers <span class="nt">--recursive</span>
<span class="c">#recursive 옵션으로 개요를 볼 수 있음</span>
</code></pre></div></div> <p>yaml파일 작성해서 컨테이너 생성해보기</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vi web2-pod.yaml

apiVersion: v1
kind: Pod
metadata:
  name: web2
spec:
  containers:
  - name: web2
    image: httpd

kubectl create <span class="nt">-f</span> web2-pod.yaml
kubectl get pods
kubectl delete <span class="nt">-f</span> web2-pod.yaml
kubectl get pods

vi web3-pod.yaml

apiVersion: v1
kind: Pod
metadata:
  name: web3
spec:
  containers:
  - name: web3a
    image: httpd
  - name: web3b
    image: c1t1d0s7/myweb
<span class="c">#port가 겹치는 것을 하면 에러 남!!!!!</span>

kubectl create <span class="nt">-f</span> web3-pod.yaml
kubectl get pods
kubectl delete <span class="nt">-f</span> web3-pod.yaml

</code></pre></div></div> <p>vi edit setting</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vi ~/.vimrc

syntax on
autocmd FileType yaml setlocal <span class="nv">ts</span><span class="o">=</span>2 <span class="nv">sts</span><span class="o">=</span>2 <span class="nv">sw</span><span class="o">=</span>2 expandtab autoindent
</code></pre></div></div> <h3> API Version </h3> <ul> <li>Stable</li> <li>Beta <ul> <li>잘 테스트 됨 / 검증됨 (오류가 적은 편)</li> <li>미리 고지 후 기능 변경이 있을 수 있으며, 방법이나 대응을 알려줌 - Mission Critical</li> <li>Mission Critical이라는 것은 down time이 발생할 수 있음</li> </ul> </li> <li>Alpha <ul> <li>개발 중, 오류가 있을 수 있음, 기능 X (기본 비활성)</li> <li>기능 변경이 갑작스럽게 있을 수 있음</li> </ul> </li> </ul> <p>Alpha -&gt; Beta -&gt; Stable</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
